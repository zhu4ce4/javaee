<!DOCTYPE html>
<html lang="en">
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <title>论坛登录与注册</title>
    <script src="mysite/addition/jquery-3.3.1.js"></script>
    <link href="mysite/css/bootstrap/3.3.6/bootstrap.min.css" rel="stylesheet"/>
    <script src="mysite/js/bootstrap/3.3.6/bootstrap.min.js"></script>
</head>
<body>
<h1>论坛登录/注册</h1>

<!--因为浏览器指定了以二进制的形式提交数据，那么就不能通过常规的手段获取非File字段：
也即accountname和password不能通过常规的request.getParameter("accountName")来获取-->
<form enctype="multipart/form-data" method="post">
    账号：<input name="accountName" type="text"><br/>
    密码：<input name="password" type="password"><br/>
    头像：<input class="btn btn-sm" id="photo1" name="filepath" type="file">
    <input class="btn btn-default btn-sm" formaction="uploadPhoto" type="submit" value="上传(最大1M)">
    <img id="usersPhoto" src="" style="width:100px;height:75px;">
    <br/>

    <!--todo:需连接数据库核实是否有重复账号-->
    <input class="btn btn-primary" formaction="register" type="submit" value="注册">
    <!--todo:需核实数据库内能否查找到对应账号及密码-->
    <input class="btn btn-primary" formaction="login" type="submit" value="登录">
</form>


<!--客户上传头像缩略图实时展现-->
<script language="JavaScript">
    $(function () {
        $("#photo1").on("change", function () {
            var file = this.files[0];
            if (this.files && file) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $("#usersPhoto").attr("src", e.target.result);
                };
                reader.readAsDataURL(file);
            }
        });
    });
</script>

</body>
</html>
